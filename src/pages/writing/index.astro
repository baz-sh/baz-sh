---
import { getCollection, getEntry } from 'astro:content';
import Container from '@/components/Container.astro';
import BaseLayout from '@/layouts/BaseLayout.astro';
import PostPreview from '@/components/ui/PostPreview.astro';
import { sortPostsByDate } from '@/lib/utils';

const entry = await getEntry('pages', 'writing');
const posts = sortPostsByDate(await getCollection('posts'));
---

<BaseLayout seo={entry.data.seo}>
  <Container as="section" class="py-6">
    <!-- Header -->
    <header class="mb-12">
      <span class="label mb-4 block">Blog</span>
      <h1 class="text-3xl font-bold text-headings mb-4">Writing</h1>
      <p class="text-text-secondary text-lg">
        Thoughts on code, software engineering, AI, and whatever else I'm thinking about.
      </p>
    </header>

    <!-- Posts List -->
    <div class="space-y-1">
      {posts.map((post) => <PostPreview entry={post} />)}
    </div>
  </Container>
</BaseLayout>
